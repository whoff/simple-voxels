#summary Lohou and Bertrand P2x-simple thinning algorithm
*Contents*
<wiki:toc max_depth="2" />

= Introduction =
By using [RaynalCouprie Raynal and Couprie]'s method,
a considerable amount of spurious brances will be reduced.
In addition, as was suggested in [Top#References [2]],
if the isthmus points were not preserved but removed,
all the skeletal branches would also be removed resulting in _ultimate thinning_,
where no more points can be removed without breaking the topology.
An ultimately thinned object has no branches and is composed of circular curves or cocoon like shells.

However, as far as I tested, there still remained some branches even when the isthmus points were removed.
Some of the remaining branches end with a specific configuration depicted in the figure below.

[http://simple-voxels.googlecode.com/svn/wiki/images/neighbor-not-removed.png]

It turned out that this configuration is one of those that are pointed out
to be non-deletable by [PalagyiKuba Palagyi and Kuba]'s method [Top#References [3]].

In [Top#References [3]], Lohou and Bertrand proposed another
deletable condition based on a powerful notion of _Px-simple_,
with which one can devise a new parallel thinning algorithm without checking
whether its matching templates are consistent to allow parallel removal of deletable points while preserving topology.

In the rest of this page, after the deletable condition is briefly explained,
an implementation will be proposed using direct bit operations and supplement template matching.

= Definition =
== P2-simple ==
To begin with, a point x is called P2-simple, as regards the U direction for example, if:
  # U neighbor is white.
  # If N/S/W/E neighbor is white, then the point above it is also white.

In the figure below, the second condition says that if a yellow point is white, then the gray point above it should be white.

[http://simple-voxels.googlecode.com/svn/wiki/images/neighbor-p2simple.png]

== P2x-simple ==
For points in the 26-neighborhood of x, they are called P2x-simple,
if they may be P2-simple when looking at the 3x3x3 neighborhood of x only.

Or in other words, a 26-neighborhood of x is not P2x-simple
if it does not satisfy the P2-simple condition already in the 3x3x3 neighborhood of x.

Here are defined following two sets of black points:
  * Px : the set of black points in the 3x3x3 neighborhood of x that are P2x-simple
  * Rx : the set of black points in the 3x3x3 neighborhood of x that are not P2x-simple

== Deletable Condition ==


= Project Proposal =


[http://simple-voxels.googlecode.com/svn/wiki/images/pxcondition-stat.png]


{{{
namespace NPxSimple {// P2x-simple
    const Mask TemplatesT26Rx[2] = {
        Mask( BV( BP(0,0,0), BP(2,0,2), BP(2,2,2) ), 0, BV( BP(0,0,0), BP(1,1,1), BP(1,1,1) ), BV( BP(0,0,0), BP(4,4,4), BP(4,4,4) ) ),
        Mask( BV( BP(0,0,0), BP(2,1,0), BP(2,3,0) ), 0, BV( BP(0,0,0), BP(1,0,0), BP(1,0,0) ), BV( BP(0,0,0), BP(4,4,7), BP(4,4,7) ) ),
    };
}
}}}


[http://simple-voxels.googlecode.com/svn/wiki/images/pxsimple-t26rx-masks.png]

[http://simple-voxels.googlecode.com/svn/wiki/images/pxsimple-t26rx-templates.png]

[http://simple-voxels.googlecode.com/svn/wiki/images/pxsimple-stat.png]

[http://simple-voxels.googlecode.com/svn/wiki/images/raynal-pxsimple.png]